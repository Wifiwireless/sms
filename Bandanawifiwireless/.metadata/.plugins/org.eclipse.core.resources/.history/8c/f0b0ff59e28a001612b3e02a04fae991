package com.wireless.utility;

import java.io.IOException;

import org.apache.commons.io.IOUtils;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;

import com.google.gson.Gson;

public class NexmoServices {

	
	public static void acquireNumber(String country,String pattern){
		
		
		
		//https://rest.nexmo.com/number/search?api_key=abcdefghi&api_secret=12345678&country=US&pattern=1619&search_pattern=0&features=sms,voice&size=1
		
		
		

		HttpClient httpClient = new DefaultHttpClient();
		Gson gson = new Gson();
		HttpGet get = new HttpGet("https://rest.nexmo.com/number/search?api_key=596e18cd&api_secret=8b4a428e&country="+country+"&pattern="+pattern+"&search_pattern=0&features=sms,voice&size=1");
		try {
		/*StringEntity postingString = new StringEntity(gson.toJson(messsage),"UTF-8");// convert your pojo to
							// json
		post.setEntity(postingString);
		post.setHeader("Content-type", "application/json");
		post.setHeader("Authorization","key=AIzaSyBzfJrfBoaHMFZ1LWA49Dbi2BxaDSRXUbs");
*/		HttpResponse response;
	/*	System.out.println(gson.toJson(messsage));*/
		response = httpClient.execute(get);

		if (response.getStatusLine().getStatusCode() == 200) {

			String responseString;
		
				responseString = IOUtils.toString(response.getEntity()
						.getContent(), "UTF-8");
				System.out.println(responseString);	
		}	else {
					System.out.println("ERROR - CODE ["
									+ response.getStatusLine().getStatusCode() + "]");

						}
			} catch (IllegalStateException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				
				e.printStackTrace();
			}

		

	}
	
	
	
	
	
	public static void main(String[] args) {
		
		
	}
	
}
